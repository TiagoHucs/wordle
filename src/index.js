const dictionary = ['sagaz',
'amago',
'negro',
'exito',
'mexer',
'termo',
'nobre',
'senso',
'algoz',
'afeto',
'etica',
'plena',
'mutua',
'tenue',
'sutil',
'fazer',
'vigor',
'aquem',
'assim',
'porem',
'secao',
'audaz',
'sanar',
'fosse',
'cerne',
'inato',
'ideia',
'poder',
'moral',
'desde',
'justo',
'muito',
'torpe',
'sobre',
'honra',
'quica',
'futil',
'razao',
'anexo',
'etnia',
'icone',
'sonho',
'egide',
'tange',
'amigo',
'lapso',
'mutuo',
'expor',
'haver',
'casal',
'habil',
'dengo',
'tempo',
'seara',
'entao',
'pesar',
'avido',
'ardil',
'bocal',
'genro',
'posse',
'causa',
'paria',
'coser',
'dizer',
'corja',
'prole',
'dever',
'saber',
'obice',
'graca',
'brado',
'tenaz',
'crivo',
'detem',
'animo',
'apice',
'comum',
'digno',
'ansia',
'temor',
'sendo',
'ceder',
'culto',
'assaz',
'atroz',
'pauta',
'gleba',
'ainda',
'mundo',
'fugaz',
'censo',
'estar',
'valha',
'vicio',
'forte',
'cozer',
'vulgo',
'nenem',
'denso',
'reves',
'pudor',
'xibiu',
'regra',
'dogma',
'louco',
'criar',
'banal',
'saude',
'round',
'jeito',
'atras',
'clava',
'impor',
'ordem',
'merce',
'pedir',
'tenro',
'apraz',
'pifio',
'desse',
'feliz',
'usura',
'homem',
'mesmo',
'reaca',
'servo',
'sabio',
'juizo',
'prosa',
'coisa',
'viril',
'presa',
'ontem',
'cunho',
'forma',
'manso',
'falar',
'limbo',
'devir',
'meiga',
'posso',
'fluir',
'afago',
'ebrio',
'vendo',
'plato',
'serio',
'magoa',
'guisa',
'heroi',
'visar',
'puder',
'todos',
'acaso',
'valor',
'certo',
'temer',
'pleno',
'impio',
'cisma',
'lugar',
'afins',
'bruma',
'obvio',
'gerar',
'exodo',
'obter',
'crise',
'matiz',
'falso',
'abrir',
'praxe',
'garbo',
'senil',
'fluxo',
'havia',
'venia',
'enfim',
'facil',
'tedio',
'legal',
'uniao',
'ritmo',
'alibi',
'burro',
'tomar',
'visao',
'pulha',
'parvo',
'valia',
'bravo',
'reter',
'vital',
'favor',
'olhar',
'genio',
'prumo',
'grato',
'levar',
'parco',
'vivaz',
'laico',
'casta',
'reles',
'morte',
'possa',
'ameno',
'tecer',
'obito',
'linda',
'prime',
'brega',
'ranco',
'nocao',
'sabia',
'falta',
'selar',
'cabal',
'facam',
'fator',
'ajuda',
'anelo',
'nicho',
'noite',
'achar',
'farsa',
'rogar',
'ouvir',
'viver',
'coeso',
'citar',
'forca',
'epico',
'fardo',
'adiar',
'cisao',
'ativo',
'sinto',
'calma',
'carma',
'passo',
'unico',
'tendo',
'dubio',
'leigo',
'sonso',
'gente',
'haste',
'outro',
'pobre',
'exato',
'sesta',
'amplo',
'rever',
'cesta',
'deter',
'revel',
'sulco',
'humor',
'imune',
'vemos',
'lavra',
'tende',
'labor',
'ciume',
'arduo',
'gesto',
'atuar',
'feixe',
'velho',
'claro',
'igual',
'ponto',
'ideal',
'otica',
'hiato',
'debil',
'sonsa',
'toada',
'terra',
'vacuo',
'terno',
'ambos',
'varao',
'marco',
'remir',
'cauda',
'fonte',
'senao',
'lider',
'capaz',
'jovem',
'fusao',
'inata',
'probo',
'ficar',
'leito',
'horda',
'advem',
'tenra',
'farao',
'velar',
'xeque',
'doido',
'algum',
'relva',
'cocar',
'vazio',
'serie',
'apoio',
'tanto',
'cacar',
'papel',
'entre',
'pouco',
'vimos',
'anuir',
'sente',
'frase',
'raiva',
'coesa',
'torco',
'rigor',
'verso',
'botar',
'dorso',
'signo',
'cruel',
'feito',
'massa',
'minha',
'mocao',
'prece',
'impar',
'brisa',
'credo',
'preso',
'covil',
'nossa',
'fauna',
'casto',
'ambas',
'ciclo',
'blase',
'morar',
'lazer',
'peste',
'chata',
'virus',
'furor',
'trama',
'faina',
'docil',
'maior',
'flora',
'pegar',
'arido',
'adeus',
'vetor',
'chuva',
'houve',
'beata',
'setor',
'seita',
'manha',
'meses',
'banzo',
'aceso',
'liame',
'senda',
'sorte',
'livro',
'vulto',
'pecha',
'carro',
'ardor',
'salvo',
'breve',
'visse',
'vasto',
'peixe',
'birra',
'comer',
'plano',
'antro',
'morro',
'saiba',
'nunca',
'ocaso',
'prado',
'reger',
'alias',
'pajem',
'rezar',
'atomo',
'segue',
'avaro',
'saida',
'otimo',
'junto',
'mudar',
'aureo',
'chulo',
'sinal',
'serao',
'acima',
'lenda',
'opcao',
'grupo',
'parar',
'treta',
'fruir',
'ancia',
'fugir',
'jazia',
'andar',
'fitar',
'brava',
'nacao',
'leite',
'campo',
'parte',
'prazo',
'puxar',
'bando',
'rapaz',
'gerir',
'tosco',
'tenso',
'alude',
'norma',
'praia',
'motim',
'idolo',
'epoca',
'risco',
'exame',
'agora',
'anais',
'sinha',
'vilao',
'tirar',
'malta',
'arcar',
'reino',
'psico',
'aviao',
'antes',
'praga',
'venal',
'indio',
'quota',
'aonde',
'soldo',
'aurea',
'corpo',
'preto',
'traga',
'logro',
'texto',
'quase',
'cheio',
'voraz',
'sumir',
'filho',
'certa',
'conta',
'fixar',
'pompa',
'turba',
'prova',
'verbo',
'virao',
'apego',
'copia',
'estao',
'oasis',
'acesa',
'nodoa',
'ligar',
'alado',
'exijo',
'solto',
'caixa',
'atrio',
'festa',
'coito',
'oxala',
'nivel',
'messe',
'turva',
'perda',
'manha',
'tocar',
'fatal',
'lindo',
'verve',
'fatos',
'grave',
'apelo',
'fraco',
'afora',
'doido',
'livre',
'mente',
'parca',
'dessa',
'trupe',
'parva',
'pardo',
'magia',
'opaco',
'fenda',
'tinha',
'elite',
'sabia',
'alcar',
'jirau',
'lidar',
'viria',
'navio',
'firme',
'faixa',
'astro',
'glosa',
'grata',
'ficha',
'autor',
'supra',
'bater',
'etico',
'salve',
'retem',
'longe',
'cioso',
'verba',
'reses',
'pique',
'vezes',
'calda',
'junco',
'deixa',
'macio',
'cousa',
'irmao',
'sarca',
'douto',
'atual',
'prive',
'pagao',
'sexta',
'bicho',
'posto',
'nosso',
'porta',
'molho',
'canon',
'torso',
'supor',
'abriu',
'light',
'judeu',
'curso',
'besta',
'extra',
'locus',
'caber',
'asilo',
'abuso',
'bioma',
'orfao',
'turvo',
'igneo',
'video',
'drops',
'radio',
'bonus',
'vosso',
'desta',
'combo',
'zelar',
'culpa',
'rouca',
'vinha',
'menos',
'pisar',
'ruina',
'julia',
'baixo',
'calao',
'ereto',
'agudo',
'paira',
'advir',
'finda',
'gosto',
'facho',
'super',
'estio',
'sitio',
'suave',
'traco',
'facto',
'feudo',
'meigo',
'surja',
'urgia',
'cutis',
'tetra',
'amena',
'turma',
'pilar',
'tento',
'louca',
'autos',
'rumor',
'chama',
'acoes',
'clean',
'museu',
'cocho',
'podio',
'mosto',
'acola',
'local',
'lapis',
'hobby',
'lasso',
'geral',
'chato',
'boato',
'optar',
'pareo',
'brabo',
'peito',
'refem',
'medir',
'aluno',
'drama',
'piada',
'rubro',
'folga',
'mesma',
'pacto',
'avida',
'crime',
'penta',
'metie',
'poema',
'ponha',
'teste',
'golpe',
'clima',
'movel',
'letal',
'feroz',
'coral',
'cacho',
'vigia',
'passa',
'aroma',
'hoste',
'monte',
'pasmo',
'vetar',
'poeta',
'acude',
'cetro',
'rival',
'fazia',
'riste',
'daqui',
'forem',
'ecoar',
'verde',
'cover',
'ateia',
'licao',
'troca',
'tacha',
'forum',
'finjo',
'carta',
'swing',
'axila',
'busca',
'monge',
'plebe',
'calmo',
'idoso',
'artur',
'sucia',
'plumo',
'ebano',
'aviso',
'falha',
'briga',
'tribo',
'escol',
'venha',
'lesse',
'conto',
'roupa',
'tarde',
'pedra',
'amiga',
'macro',
'chefe',
'perco',
'plaga',
'cargo',
'sarau',
'fruto',
'unica',
'civil',
'atimo',
'vento',
'farta',
'viram',
'grama',
'sosia',
'legua',
'virar',
'berro',
'benca',
'manga',
'saldo',
'casar',
'ornar',
'catre',
'arado',
'seixo',
'troca',
'uteis',
'fosso',
'itens',
'surto',
'magna',
'beijo',
'traje',
'bruta',
'corso',
'nuvem',
'assar',
'tiver',
'estro',
'manga',
'giria',
'deste',
'vazao',
'recem',
'ticao',
'trato',
'jejum',
'pinho',
'porte',
'amado',
'tutor',
'canso',
'vedar',
'renda',
'perto',
'arfar',
'silvo',
'depor',
'bruto',
'amada',
'bazar',
'gabar',
'irado',
'midia',
'inter',
'ambar',
'natal',
'grota',
'feita',
'deram',
'cifra',
'areia',
'rural',
'orgao',
'tchau',
'nesse',
'laudo',
'pavor',
'stand',
'bucho',
'fossa',
'odiar',
'regio',
'pasma',
'segar',
'vadio',
'clero',
'minar',
'guria',
'vagar',
'pomar',
'close',
'molde',
'xucro',
'troco',
'aviar',
'rocha',
'jogar',
'negar',
'mamae',
'canto',
'cenho',
'lesao',
'sotao',
'visto',
'densa',
'proto',
'bolsa',
'chula',
'lesto',
'cinto',
'largo',
'morfo',
'marca',
'horto',
'inves',
'paiol',
'volta',
'ruido',
'vista',
'penso',
'pugna',
'urdir',
'ileso',
'podar',
'vasta',
'tenha',
'ufano',
'varoa',
'cheia',
'logos',
'velha',
'ferpa',
'mocho',
'santo',
'ubere',
'civel',
'frota',
'nessa',
'esgar',
'nesta',
'bulir',
'umido',
'agape',
'piche',
'etapa',
'linha',
'cerca',
'fundo',
'apear',
'verao',
'resto',
'narco',
'peita',
'polis',
'simio',
'jazer',
'final',
'misto',
'coroa',
'ceita',
'manto',
'ardis',
'trago',
'preco',
'letra',
'todas',
'monta',
'troco',
'salmo',
'demao',
'burra',
'canil',
'alamo',
'chaga',
'labia',
'matar',
'campa',
'banto',
'barao',
'cosmo',
'redor',
'mover',
'gemer',
'findo',
'seiva',
'album',
'fazes',
'audio',
'venho',
'folia',
'danca',
'folha',
'porca',
'bolso',
'barro',
'retro',
'axial',
'punha',
'neste',
'queda',
'sabor',
'limpo',
'louro',
'calor',
'calvo',
'rente',
'lousa',
'firma',
'farol',
'salva',
'mimar',
'zumbi',
'lutar',
'arroz',
'macho',
'calca',
'coevo',
'sigla',
'baixa',
'torna',
'enjoo',
'justa',
'miope',
'veloz',
'solta',
'logia',
'fugiu',
'gueto',
'ousar',
'tumba',
'chave',
'nacar',
'bedel',
'longo',
'reler',
'vazia',
'corar',
'forro',
'farto',
'fatuo',
'penca',
'vario',
'sexto',
'lucro',
'cacto',
'obtem',
'sofia',
'mania',
'subir',
'urgir',
'repor',
'sugar',
'custo',
'quite',
'valer',
'louca',
'passe',
'puido',
'ultra',
'harem',
'sadio',
'staff',
'nariz',
'cardo',
'versa',
'dados',
'outra',
'usual',
'lento',
'modal',
'corte',
'refil',
'hifen',
'viger',
'socio',
'choca',
'redea',
'diabo',
'ferir',
'ceifa',
'garra',
'falsa',
'nesga',
'abade',
'mouro',
'aereo',
'voilà',
'grife',
'xampu',
'pagar',
'patio'];

const state = {
    secret: dictionary[Math.floor(Math.random() * dictionary.length)],
    grid: Array(6)
    .fill()
    .map(() => Array(5).fill('')),
    currentRow: 0,
    currentCol: 0,
};

function updateGrid() {
    for(let i = 0; i < state.grid.length;i++){
        for(let j = 0; j < state.grid[i].length;j++){
            const box = document.getElementById(`box${i}${j}`);
            box.textContent = state.grid[i][j];
        }
    }
}

function drawbox(container,row,col,letter = ''){
    const box = document.createElement('div');
    box.className = 'box';
    box.id = `box${row}${col}`;
    box.textContent = letter;

    container.appendChild(box);
    return box;
}

function drawGrid(container){
    const grid = document.createElement('div');
    grid.className = 'grid';

    for(let i = 0; i < 6;i++){
        for(let j = 0; j < 5;j++){
            drawbox(grid,i,j);
        }   
    }

   container.appendChild(grid);
}

function registerKeyboardEvents(){
    document.body.onkeydown = (e) => {
        const key = e.key; 

        if(key == 'Enter'){
            if(state.currentCol === 5){
                const word = getCurrentWord();
                if(isWordValid(word)){
                    revealWord(word);
                    state.currentRow++;
                    state.currentCol = 0;
                } else {
                    alert('Não é palavra');
                }
            }
        }

        if(key == 'Backspace'){
            removeLetter();   
        }

        if(isLetter(key)){
            addLetter(key);
        }

        updateGrid();

    }
}

function getCurrentWord(){
    return state.grid[state.currentRow].reduce((prev,curr) => prev + curr);
}



function isLetter(key){
    return key.length === 1 && key.match(/[a-z]/i);
}

function addLetter(letter){
    if (state.currentCol === 5) return;
    state.grid[state.currentRow][state.currentCol] = letter;
    state.currentCol++;
}

function removeLetter(){
    if (state.currentCol === 0) return;
    state.grid[state.currentRow][state.currentCol - 1] = '';
    state.currentCol--;
}

function isWordValid(word){
    return word.length === 5;
}

function revealWord(guess){
    const row = state.currentRow;
    const animation_duration = 500; //ms

    for(let i = 0 ; i < 5 ; i++){
        const box = document.getElementById(`box${row}${i}`);
        const letter = box.textContent;

        setTimeout(() => {
            if(letter === state.secret[i]){
                box.classList.add('right');
            } else if (state.secret.includes(letter)) {
                box.classList.add('wrong');
            } else {
                box.classList.add('empty');
            }
        },((i + 1) * animation_duration) / 2);

        box.classList.add('animated');
        box.style.animationDelay = `${(i * animation_duration) / 2}ms`
    }

    const isWinner = state.secret === guess
    const isGameOver = state.currentRow === 5;

    setTimeout(() => {
        if(isWinner){
            alert('Parabens!');
        } else if (isGameOver) {
            alert('Mais sorte na proxima vez! Palavra ' + state.secret);
        }

    }, 3 * animation_duration);


}

function startup(){
    const game = document.getElementById('game');
    drawGrid(game);

  /*  state.grid = Array(6)
        .fill()
        .map(() => Array(5).fill('A'));
    updateGrid();
    */

    registerKeyboardEvents();

}


startup();
